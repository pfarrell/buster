<!DOCTYPE html>
%html
  %head
    %title#title
      #{@title}
    %meta{:charset => "utf-8"}
    %meta{:name => "viewport", :content=>"width=device-width, initial-scale=1, maximum-scale=1"}
    %meta{:name=>"apple-mobile-web-app-capable", :content=>"yes"}
    :javascript
      var enabled = true;
      function getParam(name) {
        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"), results = regex.exec(location.search);
        return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
      } 
      function togglePlayPause(elem) {
        enabled = !enabled;
        if(enabled) {
          elem.value = "Pause";
          update();
        }else{
          elem.value = "Play";
        }
      }
    %link{rel: "stylesheet", href: "#{url_for '/css/bootstrap/3.1.1/bootstrap.min.css'}", :type => "text/css"}
    %link{rel: "stylesheet", href: "#{url_for '/css/default.css'}", :type => "text/css", :media => "screen" }
    %script{type: "text/javascript", src: "http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"}
    %script{type: "text/javascript", src:"/js/d3.min.js"}
    <!--%link{:rel => "stylesheet", :href => "http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/base/jquery-ui.css", :type => "text/css"}-->
  %body
    %div.navbar.navbar-default.navbar-fixed-top
      %div.container
        %div.navbar-header.navbar-collapse.collapse
          %ul.nav.navbar-nav
            %li
              %a{href:"/"}
                List
            %li
              %a{href:"/collage"}
                Collage
            %li
              %a{href:"/stats"}
                Stats
          %ul.refresh.navbar-nav.navbar-right
            %li.nav
              %label
                Refresh Rate: 
              %label{id:"delay_lbl"}
              %label
                ms
              %br
              %input#refresh_bar{type:"range", name:"refresh", min:"5", value:"300", max:"1000", step:"5", onchange:"refreshDelay(this)"}
            %li.nav
              %input#play_pause.btn{type:"button", name:"pause_play", value:"Pause", onclick:"togglePlayPause(this);"}
              %input#clear.btn{type:"button", name:"queue_clear", value:"Clear", onclick:"queue=[];document.getElementById('buffer_size').innerHTML='backlog cleared';"}
              %br
              %label
                msg backlog: 
              %label#buffer_size
    %div.container#content
      =yield
    %div.container
      %div.row
        %div.twelvecol
          %div.container.footer
